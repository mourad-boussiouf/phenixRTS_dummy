
<html>
    <body>
        <p>bonjour, voici le stream audio, juste sous vos yeux !</p>
        <link href="style.css" rel="stylesheet" />
        <button onclick="openPopup()">Open Popup</button>
        <div id="container">
        <div id="block"></div>
          <!-- <iframe class="audioButton"
            src="https://pcast.phenixrts.com/channel/?token=DIGEST:eyJhcHBsaWNhdGlvbklkIjoibXl0b3VybGl2ZS5jbyIsImRpZ2VzdCI6IncvZWR6YSs5M1BGS1dLamlJK0ZZZ1doNG8vL000bjI2YmQ5NW9JUURSbUlkanZpWXBjYmk0UGtWQzBTWFhZSVFNK2U2UytNSHR4U2lOSHVZSmNtWmhRPT0iLCJ0b2tlbiI6IntcImV4cGlyZXNcIjoxNjc3NTczMjIwNzQ4LFwidXJpXCI6XCJodHRwczovL3BjYXN0LnBoZW5peHJ0cy5jb21cIixcInJlcXVpcmVkVGFnXCI6XCJjaGFubmVsSWQ6ZXVyb3BlLWNlbnRyYWwjbXl0b3VybGl2ZS5jbyN0ZXN0QXVkaW8uV0pXczFadzNzaU1RXCJ9In0=#testAudio?autoplay=1"
            frameborder="0"
            allow="autoplay; encrypted-media"
            controls autoplay
            > 
          </iframe> -->
        </div>
    </body>
</html>
<script defer>
    let radioLoader = document.createElement("iframe");
    radioLoader.setAttribute(
      "src",
      "https://pcast.phenixrts.com/channel/?token=DIGEST:eyJhcHBsaWNhdGlvbklkIjoibXl0b3VybGl2ZS5jbyIsImRpZ2VzdCI6IncvZWR6YSs5M1BGS1dLamlJK0ZZZ1doNG8vL000bjI2YmQ5NW9JUURSbUlkanZpWXBjYmk0UGtWQzBTWFhZSVFNK2U2UytNSHR4U2lOSHVZSmNtWmhRPT0iLCJ0b2tlbiI6IntcImV4cGlyZXNcIjoxNjc3NTczMjIwNzQ4LFwidXJpXCI6XCJodHRwczovL3BjYXN0LnBoZW5peHJ0cy5jb21cIixcInJlcXVpcmVkVGFnXCI6XCJjaGFubmVsSWQ6ZXVyb3BlLWNlbnRyYWwjbXl0b3VybGl2ZS5jbyN0ZXN0QXVkaW8uV0pXczFadzNzaU1RXCJ9In0=#testAudio?autoplay=1"
    );
    radioLoader.setAttribute(
      "frameborder",
      "0"
    );
    radioLoader.setAttribute(
      "allow",
      "autoplay; encrypted-media"
    );
    radioLoader.classList.add("audioButton");
    document.getElementById('container').appendChild(radioLoader);

    setInterval(log, 3000);

    function log(){
        let iframe = document.querySelectorAll('iframe');
        let muteAudio = window.document.getElementById('muteAudio');
        //videoElement 
        console.log(iframe);
    }
    
    window.addEventListener("message", receiveMessage, false);

    function receiveMessage(event) {
        console.log({timeStamp: event.timeStamp, data: event.data});
    }

    function onCreated(windowInfo) {
  console.log(`Created window: ${windowInfo.id}`);
}

function onError(error) {
  console.log(`Error: ${error}`);
}


function openPopup() {
  var popupUrl = "https://www.example.com/popup.html";

  var popupWidth = 400;
  var popupHeight = 300;

  var leftPosition = (screen.width - popupWidth) / 2;
  var topPosition = (screen.height - popupHeight) / 2;

  var popupWindow = window.open(
    popupUrl,
    "popup",
    "width=" + popupWidth + ", height=" + popupHeight + ", left=" + leftPosition + ", top=" + topPosition + ", resizable=yes, scrollbars=yes"
  );

  if (window.focus) {
    popupWindow.focus();
  }
}

/* public async launchRadioMode(key:number){
    const token = "DIGEST:eyJhcHBsaWNhdGlvbklkIjoibXl0b3VybGl2ZS5jbyIsImRpZ2VzdCI6IjJyeTFzL0RXM2lXZUh3VnJQK0hRMHUyTDR4dXZORVRjZm9PRmsxY0hjVTBVRXBUa04wWlNrNTRxeXB1dFA5N05IdzFwcHJzbEcyYkx6UitIYmM3d3BRPT0iLCJ0b2tlbiI6IntcImV4cGlyZXNcIjoxNjc5NzM5Njk5MTQ2LFwidXJpXCI6XCJodHRwczovL3BjYXN0LnBoZW5peHJ0cy5jb21cIixcInJlcXVpcmVkVGFnXCI6XCJjaGFubmVsSWQ6ZXVyb3BlLWNlbnRyYWwjbXl0b3VybGl2ZS5jbyN0ZXN0QXVkaW8uV0pXczFadzNzaU1RXCJ9In0=";
    const encodedToken = encodeURIComponent(token);
    const base = "https://pcast.phenixrts.com/channel/?";
    console.log(key);
    function tokenKeyRetrieveRecursion(hash:boolean){
      let finalToken = "3VybGl2ZS5jbyIsImRpZ2VzdCI6IjJyeTFzL0RXM2lXZUh3VnJQK0hRMHUyTDR4dXZORVRjZm9PRms";
      if(hash)return finalToken;
      const newAudio = ((this as any).$Amplify.API.graphql(
        (this as any).$Amplify.graphqlOperation(encodedToken,{
          input: this.activesInRoomAuditors,
        })
      )) as GraphQLResult<CreateVideoMutation>;
      this.tokenKeyRetrieveRecursion(true);
    }
    tokenKeyRetrieveRecursion(true);
    const queryParams = `token=${encodedToken}#testAudio`;
    const url = base + queryParams;
    console.log("PROCESS",tokenKeyRetrieveRecursion(true))
    if(key===42 && this.activesInRoomGuestCount < this.radioModeThreshold){
      console.log("test key");
      let audiobuttonV = document.getElementById("audioButtonID");
      if (audiobuttonV !== null){
        audiobuttonV.parentNode.removeChild(audiobuttonV)
      }
    }
    else if(key===42 && this.activesInRoomGuestCount >= this.radioModeThreshold && this.visit.optionMicrophone===1){
      if(this.activesInRoomGuestCount >= this.radioModeThreshold){
        let audiobuttonV = document.getElementById("audioButtonID");
        if (audiobuttonV !== null)return
        else if (audiobuttonV === null){
          let radioLoader = document.createElement("iframe");
          radioLoader.setAttribute(
            "src",
            url
            );
          radioLoader.setAttribute(
            "frameborder",
            "0"
          );
          radioLoader.setAttribute("id","audioButtonID");
          radioLoader.setAttribute(
            "allow",
            "autoplay; encrypted-media"
          );
          radioLoader.classList.add("audioButton");
          document.getElementById('container').appendChild(radioLoader);
        }
      }
    }else if(key===43)return
    else return
  } */
</script>